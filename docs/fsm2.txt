--[[
    class-based finite state machine


]]